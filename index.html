<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>E-VITARA çºŒèˆª & å……é›»è¨ˆç®—æ©Ÿ</title>

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    background: #f4f6f8;
    margin: 0;
    padding: 16px;
  }
  .card {
    max-width: 420px;
    margin: auto;
    background: #fff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  }
  h1 {
    font-size: 20px;
    margin-bottom: 16px;
    text-align: center;
  }
  .group {
    margin-bottom: 16px;
  }
  label {
    font-size: 14px;
    display: block;
    margin-bottom: 6px;
  }
  .radio-group {
    display: flex;
    gap: 12px;
    font-size: 14px;
  }
  input[type="range"],
  input[type="number"] {
    width: 100%;
  }
  .result {
    background: #f1f8ff;
    border-radius: 12px;
    padding: 14px;
    margin-top: 12px;
    font-size: 15px;
  }
  .highlight {
    font-size: 22px;
    font-weight: bold;
    color: #007aff;
  }
  .note {
    font-size: 12px;
    color: #666;
    margin-top: 6px;
    line-height: 1.4;
  }
</style>
</head>

<body>

<div class="card">
  <h1>ğŸš— E-VITARA çºŒèˆªï¼†å……é›»è¨ˆç®—æ©Ÿ</h1>

  <!-- é¦¬é”é¸æ“‡ -->
  <div class="group">
    <label>é©…å‹•å½¢å¼</label>
    <div class="radio-group">
      <label><input type="radio" name="motor" value="single" checked> å–®é¦¬é”ï¼ˆ516 kmï¼‰</label>
      <label><input type="radio" name="motor" value="dual"> é›™é¦¬é”ï¼ˆ444 kmï¼‰</label>
    </div>
  </div>

  <!-- å‰©é¤˜é›»é‡ -->
  <div class="group">
    <label>å‰©é¤˜é›»é‡ï¼š<span id="batteryText">50%</span></label>
    <input type="range" min="0" max="100" value="50" id="battery">
  </div>

  <!-- çºŒèˆªçµæœ -->
  <div class="result">
    ğŸ”‹ é ä¼°å¯è¡Œé§›è·é›¢
    <div class="highlight" id="rangeResult">â€” km</div>
  </div>

  <hr style="margin:20px 0">

  <!-- å……é›» -->
  <div class="group">
    <label>ç›®æ¨™å……é›»ï¼š<span id="targetText">80%</span></label>
    <input type="range" min="10" max="100" value="80" id="target">
  </div>

  <!-- DC å¿«å……çµæœ -->
  <div class="result">
    âš¡ DC å¿«å……é ä¼°æ™‚é–“
    <div class="highlight" id="chargeResult">â€”</div>
    <div class="note">
      å®˜æ–¹æ¨™ç¤ºï¼šDC å¿«å…… 10â€“80% ç´„ 45 åˆ†é˜<br>
      â€» å¯¦éš›æ™‚é–“ä¾æº«åº¦ã€é›»é‡ç‹€æ³ç•¥æœ‰å·®ç•°
    </div>
  </div>

  <!-- AC æ…¢å……çµæœ -->
  <!-- AC æ…¢å……çµæœ -->
<div class="result">
  âš¡ AC 7 kW å–®ç›¸äº¤æµå……é›»ï½œç´„ 9 å°æ™‚ 10% â†’ 100%
  <div class="highlight" id="acChargeResult">â€”</div>
  <div class="note">æ…¢å……é©åˆå®¶ç”¨ / å¤œé–“å……é›»</div>
</div>


</div>

<script>
const BATTERY_CAPACITY = 61; // kWh
const AC_FULL_CHARGE_TIME = 9; // 10%â†’100% å®˜æ–¹9å°æ™‚

const CONSUMPTION = {
  single: 11.82,
  dual: 13.74
};

const DC_FAST_CHARGE = {
  start: 10,
  end: 80,
  timeMinutes: 45
};

const battery = document.getElementById("battery");
const target = document.getElementById("target");

const batteryText = document.getElementById("batteryText");
const targetText = document.getElementById("targetText");
const rangeResult = document.getElementById("rangeResult");
const chargeResult = document.getElementById("chargeResult");
const acChargeResult = document.getElementById("acChargeResult");

function getMotorType() {
  return document.querySelector('input[name="motor"]:checked').value;
}

function safeNumber(value, fallback = 0) {
  const num = parseFloat(value);
  return isNaN(num) ? fallback : num;
}

function update() {
  const current = safeNumber(battery.value, 50);
  const targetValue = safeNumber(target.value, 80);

  batteryText.textContent = current + "%";
  targetText.textContent = targetValue + "%";

  // ===== çºŒèˆªè¨ˆç®— =====
  const consumption = CONSUMPTION[getMotorType()];
  const usableEnergy = BATTERY_CAPACITY * (current / 100);
  const range = usableEnergy / (consumption / 100);
  rangeResult.textContent = isFinite(range) ? Math.round(range) + " km" : "â€”";

  // ===== DC å¿«å…… =====
  let dcMinutes = 0;
  if (current < 10 && targetValue <= 10) {
    chargeResult.textContent = "â€”";
  } else {
    if (current < 80 && targetValue > 10) {
      const start = Math.max(current, 10);
      const end = Math.min(targetValue, 80);
      if (end > start) {
        const ratio = (end - start) / (DC_FAST_CHARGE.end - DC_FAST_CHARGE.start);
        dcMinutes += ratio * DC_FAST_CHARGE.timeMinutes;
      }
    }
    if (targetValue > 80 && current < targetValue) {
      const energy = BATTERY_CAPACITY * ((targetValue - Math.max(current, 80)) / 100);
      dcMinutes += (energy / 30) * 60; // 80%-100%ä½é€Ÿè£œé›»æ¨¡æ“¬30kW
    }
    const h = Math.floor(dcMinutes / 60);
    const m = Math.round(dcMinutes % 60);
    chargeResult.textContent = h > 0 ? `${h} å°æ™‚ ${m} åˆ†` : `${m} åˆ†é˜`;
  }

  // ===== AC å®˜æ–¹æ…¢å…… =====
  if (targetValue > current) {
    const chargePercent = Math.max(0, targetValue - current);
    const acHours = AC_FULL_CHARGE_TIME * (chargePercent / 90); // 10%â†’100% = 9å°æ™‚
    const h = Math.floor(acHours);
    const m = Math.round((acHours % 1) * 60);
    acChargeResult.textContent = h > 0 ? `${h} å°æ™‚ ${m} åˆ†` : `${m} åˆ†é˜`;
  } else {
    acChargeResult.textContent = "â€”";
  }
}

document.querySelectorAll("input").forEach(el =>
  el.addEventListener("input", update)
);

update();
</script>

</body>
</html>
